{"remainingRequest":"/run/media/sium/home/sium/city_bus/frontend/citybus/node_modules/babel-loader/lib/index.js!/run/media/sium/home/sium/city_bus/frontend/citybus/node_modules/cache-loader/dist/cjs.js??ref--0-0!/run/media/sium/home/sium/city_bus/frontend/citybus/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/run/media/sium/home/sium/city_bus/frontend/citybus/src/views/Login.vue?vue&type=script&lang=js","dependencies":[{"path":"/run/media/sium/home/sium/city_bus/frontend/citybus/src/views/Login.vue","mtime":1637252576061},{"path":"/run/media/sium/home/sium/city_bus/frontend/citybus/babel.config.js","mtime":1635395796301},{"path":"/run/media/sium/home/sium/city_bus/frontend/citybus/node_modules/cache-loader/dist/cjs.js","mtime":1635395789697},{"path":"/run/media/sium/home/sium/city_bus/frontend/citybus/node_modules/babel-loader/lib/index.js","mtime":1635395790311},{"path":"/run/media/sium/home/sium/city_bus/frontend/citybus/node_modules/cache-loader/dist/cjs.js","mtime":1635395789697},{"path":"/run/media/sium/home/sium/city_bus/frontend/citybus/node_modules/vue-loader-v16/dist/index.js","mtime":1635395790304}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ydW4vbWVkaWEvc2l1bS9ob21lL3NpdW0vY2l0eV9idXMvZnJvbnRlbmQvY2l0eWJ1cy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdMb2dpbicsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICBlcnJvcnM6IFtdLAogICAgICBpc19sb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdDogZnVuY3Rpb24gc3VibWl0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGZvcm1kYXRhLCBfdGhpczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMyLmlzX2xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgZm9ybWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBfdGhpczIudXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBfdGhpczIucGFzc3dvcmQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfdGhpcyA9IF90aGlzMjsgLy9jb25zb2xlLmxvZyhmb3JtZGF0YSkKCiAgICAgICAgICAgICAgICBkZWxldGUgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkF1dGhvcml6YXRpb24iXTsKICAgICAgICAgICAgICAgIF90aGlzMi5lcnJvcnMgPSBbXTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJ2FwaS9hdXRoL3Rva2VuL2xvZ2luLycsIGZvcm1kYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLmlzX2xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzLmRhdGFbJ2F1dGhfdG9rZW4nXTsgLy8gdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VzZXInLHJlcy5kYXRhKQoKICAgICAgICAgICAgICAgICAgLy8gdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VzZXInLHJlcy5kYXRhKQogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCB0b2tlbik7CiAgICAgICAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiVG9rZW4gIiArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgICAgICAgICAgICAgICBheGlvcy5nZXQoJ2FwaS9hdXRoL3VzZXJzL21lLycpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgIF90aGlzMi4kc3RvcmUuZGlzcGF0Y2goJ3VzZXInLCByZXMuZGF0YSk7IC8vY29uc29sZS5sb2codGhpcy4kc3RvcmUuc3RhdGUudXNlcikKCgogICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy4kc3RvcmUuc3RhdGUudXNlcikKICAgICAgICAgICAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKCcvJyk7CiAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgICAgICAgIH0pOyAvL2NvbnNvbGUubG9nKHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuYXV0aF90b2tlbikKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IG1hZGUgYW5kIHNlcnZlciByZXNwb25kZWQKICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgICAgIF90aGlzLmVycm9ycyA9IGVycm9yLnJlc3BvbnNlOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzLmVycm9ycyk7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNfbG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/run/media/sium/home/sium/city_bus/frontend/citybus/src/views/Login.vue"],"names":[],"mappings":";;AA4EA,OAAO,KAAP,MAAkB,OAAlB;AACA,eAAe;AACX,EAAA,IAAI,EAAC,OADM;AAGX,EAAA,IAHW,kBAGL;AACF,WAAM;AACF,MAAA,QAAQ,EAAC,EADP;AAEF,MAAA,QAAQ,EAAC,EAFP;AAGF,MAAA,MAAM,EAAC,EAHL;AAIF,MAAA,UAAU,EAAC;AAJT,KAAN;AAMH,GAVU;AAWX,EAAA,OAAO,EAAC;AACE,IAAA,MADF,oBACU;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACV,gBAAA,MAAI,CAAC,UAAL,GAAkB,IAAlB;AACM,gBAAA,QAFI,GAEO;AACb,kBAAA,QAAQ,EAAC,MAAI,CAAC,QADD;AAEb,kBAAA,QAAQ,EAAC,MAAI,CAAC;AAFD,iBAFP;AAMN,gBAAA,KANM,GAME,MANF,EAOV;;AACA,uBAAQ,KAAK,CAAC,QAAN,CAAe,OAAf,CAAuB,MAAvB,CAA8B,eAA9B,CAAR;AACA,gBAAA,MAAI,CAAC,MAAL,GAAc,EAAd;AATU;AAAA,uBAUJ,KAAK,CAAC,IAAN,CAAW,uBAAX,EAAmC,QAAnC,EACL,IADK,CACA,UAAA,GAAE,EAAK;AACT,kBAAA,MAAI,CAAC,UAAL,GAAkB,KAAlB;AACA,sBAAM,KAAI,GAAI,GAAG,CAAC,IAAJ,CAAS,YAAT,CAAd,CAFS,CAGT;;AAAA;AACA,kBAAA,YAAY,CAAC,OAAb,CAAqB,OAArB,EAA6B,KAA7B;AACA,kBAAA,KAAK,CAAC,QAAN,CAAe,OAAf,CAAuB,MAAvB,CAA8B,eAA9B,IAAkD,WAAa,YAAY,CAAC,OAAb,CAAqB,OAArB,CAA/D;AACA,kBAAA,KAAK,CAAC,GAAN,CAAU,oBAAV,EACC,IADD,CACM,UAAA,GAAE,EAAK;AACT,oBAAA,MAAI,CAAC,MAAL,CAAY,QAAZ,CAAqB,MAArB,EAA4B,GAAG,CAAC,IAAhC,EADS,CAET;;;AAAA;AACA,oBAAA,MAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,GAAlB;AACH,mBALD,EAMC,IAND,CAMM,UAAA,GAAE,EAAK;AACT,oBAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;AACH,mBARD,EANS,CAeT;AACH,iBAjBK,EAkBL,KAlBK,CAkBC,UAAU,KAAV,EAAiB;AACpB,sBAAI,KAAK,CAAC,QAAV,EAAoB;AACpB;AAEA;AACA,oBAAA,KAAK,CAAC,MAAN,GAAe,KAAK,CAAC,QAArB;AACA,oBAAA,OAAO,CAAC,GAAR,CAAY,KAAK,CAAC,MAAlB;AACA,oBAAA,KAAK,CAAC,UAAN,GAAmB,KAAnB;AAIA;AAEH,iBA/BK,CAVI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA0Cd;AA3CI;AAXG,CAAf","sourcesContent":["<template>\n    <div>\n        <div class=\"container\">\n        <div class=\"card\" style=\"width: 30rem;\">\n        <div class=\"card-header my-3\">\n            <h2>Login</h2>\n        </div>\n        <div class=\"card-body\">\n            <div v-for=\"data in errors\" :key=\"data.id\">\n                <div class=\"row mb-1\">\n                    <span v-if=\"data.username\" class=\"info\">\n                        <i class=\"fas fa-info-circle\"></i>\n                    username = {{data.username}}\n                    </span>\n                    <span v-if=\"data.password\" class=\"info\">\n                    <i class=\"fas fa-info-circle\"></i>\n                        password = {{data.password}}\n                    </span>\n                    <span v-if=\"data.non_field_errors\" class=\"info\">\n                        <i class=\"fas fa-info-circle\"></i>\n                    error = {{data.non_field_errors}}\n                    </span>\n                </div>\n                \n                \n                \n                \n                \n\n            </div>\n            <form @submit.prevent=\"submit\">\n                <div class=\"mb-3\">\n                    <label for=\"exampleInputEmail1\" class=\"form-label\">Username</label>\n                    <input type=\"text\" v-model=\"username\" class=\"form-control\" id=\"exampleInputEmail1\" required>\n                    \n                </div>\n                <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">Password</label>\n                    <input type=\"password\" v-model=\"password\" class=\"form-control\" id=\"exampleInputPassword1\" required>\n                </div>\n                \n                <div class=\"mb-3 form-check\">\n                    <input type=\"checkbox\" class=\"form-check-input\" id=\"exampleCheck1\" required>\n                    <label class=\"form-check-label\" for=\"exampleCheck1\">Remeber me</label>\n\n                </div>\n                <div class=\"mb-3 \">\n                    <span>Not a member? </span>\n                    <router-link to='/register'>\n                    Register\n                    </router-link>\n\n                </div>\n\n                <button v-if=\"is_loading === false\" type=\"submit\" class=\"btn btn-primary\">Submit</button>\n                <button v-if=\"is_loading === true\" class=\"btn btn-primary\" type=\"button\" disabled>\n                    <span\n                        class=\"spinner-border spinner-border-sm\"\n                        role=\"status\"\n                        aria-hidden=\"true\"\n                    ></span>\n                    <span class=\"visually-hidden\">Submitting...</span>\n                </button>\n            </form>\n            \n        </div>\n    </div>\n    \n    </div>\n    <router-view></router-view>\n\n    </div>\n    \n    \n</template>\n<script>\nimport axios from 'axios'\nexport default {\n    name:'Login',\n\n    data(){\n        return{\n            username:'',\n            password:'',\n            errors:[],\n            is_loading:false\n        }\n    },\n    methods:{\n        async submit(){\n            this.is_loading = true\n            const formdata = {\n                username:this.username,\n                password:this.password\n            }\n            let _this = this\n            //console.log(formdata)\n            delete  axios.defaults.headers.common[\"Authorization\"];\n            this.errors = [];\n            await axios.post('api/auth/token/login/',formdata)\n            .then(res => {\n                this.is_loading = false\n                const token = res.data['auth_token']\n                // this.$store.dispatch('user',res.data)\n                localStorage.setItem('token',token)\n                axios.defaults.headers.common['Authorization'] =  \"Token \"  +  localStorage.getItem('token')\n                axios.get('api/auth/users/me/')\n                .then(res => {\n                    this.$store.dispatch('user',res.data)\n                    //console.log(this.$store.state.user)\n                    this.$router.push('/')\n                })\n                .then(err => {\n                    console.log(err)\n                })\n                //console.log(this.$store.state.user.auth_token)\n            })\n            .catch(function (error) {\n                if (error.response) {\n                // Request made and server responded\n                \n                //console.log(error.response.data);\n                _this.errors = error.response\n                console.log(_this.errors)\n                _this.is_loading = false\n                \n                \n                \n                } \n\n            });\n        }\n    }\n}\n</script>\n<style>\n.container{\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    \n}\n.card{\n    margin-top: 3rem;\n} \nh2{\n    font-weight: 900;\n}\n</style>"],"sourceRoot":""}]}