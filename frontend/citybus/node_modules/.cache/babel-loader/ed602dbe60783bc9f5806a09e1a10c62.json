{"remainingRequest":"/home/sium/city_bus/frontend/citybus/node_modules/babel-loader/lib/index.js!/home/sium/city_bus/frontend/citybus/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/sium/city_bus/frontend/citybus/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/sium/city_bus/frontend/citybus/src/views/Login.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/sium/city_bus/frontend/citybus/src/views/Login.vue","mtime":1637090111218},{"path":"/home/sium/city_bus/frontend/citybus/babel.config.js","mtime":1635395796301},{"path":"/home/sium/city_bus/frontend/citybus/node_modules/cache-loader/dist/cjs.js","mtime":1635395789697},{"path":"/home/sium/city_bus/frontend/citybus/node_modules/babel-loader/lib/index.js","mtime":1635395790311},{"path":"/home/sium/city_bus/frontend/citybus/node_modules/cache-loader/dist/cjs.js","mtime":1635395789697},{"path":"/home/sium/city_bus/frontend/citybus/node_modules/vue-loader-v16/dist/index.js","mtime":1635395790304}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3NpdW0vY2l0eV9idXMvZnJvbnRlbmQvY2l0eWJ1cy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdMb2dpbicsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICBlcnJvcnM6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZm9ybWRhdGEsIF90aGlzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBmb3JtZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IF90aGlzMi51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IF90aGlzMi5wYXNzd29yZAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF90aGlzID0gX3RoaXMyOyAvL2NvbnNvbGUubG9nKGZvcm1kYXRhKQoKICAgICAgICAgICAgICAgIGRlbGV0ZSBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdOwogICAgICAgICAgICAgICAgX3RoaXMyLmVycm9ycyA9IFtdOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnYXBpL2F1dGgvdG9rZW4vbG9naW4vJywgZm9ybWRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSByZXMuZGF0YVsnYXV0aF90b2tlbiddOyAvLyB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXNlcicscmVzLmRhdGEpCgogICAgICAgICAgICAgICAgICAvLyB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXNlcicscmVzLmRhdGEpCiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHRva2VuKTsKICAgICAgICAgICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICJUb2tlbiAiICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICAgICAgICAgICAgICAgIGF4aW9zLmdldCgnYXBpL2F1dGgvdXNlcnMvbWUvJykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLiRzdG9yZS5kaXNwYXRjaCgndXNlcicsIHJlcy5kYXRhKTsgLy9jb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5zdGF0ZS51c2VyKQoKCiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5zdGF0ZS51c2VyKQogICAgICAgICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goJy8nKTsKICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICAgICAgfSk7IC8vY29uc29sZS5sb2codGhpcy4kc3RvcmUuc3RhdGUudXNlci5hdXRoX3Rva2VuKQogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgbWFkZSBhbmQgc2VydmVyIHJlc3BvbmRlZAogICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXJyb3JzID0gZXJyb3IucmVzcG9uc2U7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMuZXJyb3JzKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/sium/city_bus/frontend/citybus/src/views/Login.vue"],"names":[],"mappings":";;AAoEA,OAAO,KAAP,MAAkB,OAAlB;AACA,eAAe;AACX,EAAA,IAAI,EAAC,OADM;AAGX,EAAA,IAHW,kBAGL;AACF,WAAM;AACF,MAAA,QAAQ,EAAC,EADP;AAEF,MAAA,QAAQ,EAAC,EAFP;AAGF,MAAA,MAAM,EAAC;AAHL,KAAN;AAKH,GATU;AAUX,EAAA,OAAO,EAAC;AACE,IAAA,MADF,oBACU;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACJ,gBAAA,QADI,GACO;AACb,kBAAA,QAAQ,EAAC,MAAI,CAAC,QADD;AAEb,kBAAA,QAAQ,EAAC,MAAI,CAAC;AAFD,iBADP;AAKN,gBAAA,KALM,GAKE,MALF,EAMV;;AACA,uBAAQ,KAAK,CAAC,QAAN,CAAe,OAAf,CAAuB,MAAvB,CAA8B,eAA9B,CAAR;AACA,gBAAA,MAAI,CAAC,MAAL,GAAc,EAAd;AARU;AAAA,uBASJ,KAAK,CAAC,IAAN,CAAW,uBAAX,EAAmC,QAAnC,EACL,IADK,CACA,UAAA,GAAE,EAAK;AACT,sBAAM,KAAI,GAAI,GAAG,CAAC,IAAJ,CAAS,YAAT,CAAd,CADS,CAET;;AAAA;AACA,kBAAA,YAAY,CAAC,OAAb,CAAqB,OAArB,EAA6B,KAA7B;AACA,kBAAA,KAAK,CAAC,QAAN,CAAe,OAAf,CAAuB,MAAvB,CAA8B,eAA9B,IAAkD,WAAa,YAAY,CAAC,OAAb,CAAqB,OAArB,CAA/D;AACA,kBAAA,KAAK,CAAC,GAAN,CAAU,oBAAV,EACC,IADD,CACM,UAAA,GAAE,EAAK;AACT,oBAAA,MAAI,CAAC,MAAL,CAAY,QAAZ,CAAqB,MAArB,EAA4B,GAAG,CAAC,IAAhC,EADS,CAET;;;AAAA;AACA,oBAAA,MAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,GAAlB;AACH,mBALD,EAMC,IAND,CAMM,UAAA,GAAE,EAAK;AACT,oBAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;AACH,mBARD,EALS,CAcT;AACH,iBAhBK,EAiBL,KAjBK,CAiBC,UAAU,KAAV,EAAiB;AACpB,sBAAI,KAAK,CAAC,QAAV,EAAoB;AACpB;AAEA;AACA,oBAAA,KAAK,CAAC,MAAN,GAAe,KAAK,CAAC,QAArB;AACA,oBAAA,OAAO,CAAC,GAAR,CAAY,KAAK,CAAC,MAAlB;AAKA;AAEH,iBA9BK,CATI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwCd;AAzCI;AAVG,CAAf","sourcesContent":["<template>\n    <div>\n        <div class=\"container\">\n        <div class=\"card\" style=\"width: 30rem;\">\n        <div class=\"card-header my-3\">\n            <h2>Login</h2>\n        </div>\n        <div class=\"card-body\">\n            <div v-for=\"data in errors\" :key=\"data.id\">\n                <div class=\"row mb-1\">\n                    <span v-if=\"data.username\" class=\"info\">\n                        <i class=\"fas fa-info-circle\"></i>\n                    username = {{data.username}}\n                    </span>\n                    <span v-if=\"data.password\" class=\"info\">\n                    <i class=\"fas fa-info-circle\"></i>\n                        password = {{data.password}}\n                    </span>\n                    <span v-if=\"data.non_field_errors\" class=\"info\">\n                        <i class=\"fas fa-info-circle\"></i>\n                    error = {{data.non_field_errors}}\n                    </span>\n                </div>\n                \n                \n                \n                \n                \n\n            </div>\n            <form @submit.prevent=\"submit\">\n                <div class=\"mb-3\">\n                    <label for=\"exampleInputEmail1\" class=\"form-label\">Username</label>\n                    <input type=\"text\" v-model=\"username\" class=\"form-control\" id=\"exampleInputEmail1\" required>\n                    \n                </div>\n                <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">Password</label>\n                    <input type=\"password\" v-model=\"password\" class=\"form-control\" id=\"exampleInputPassword1\" required>\n                </div>\n                \n                <div class=\"mb-3 form-check\">\n                    <input type=\"checkbox\" class=\"form-check-input\" id=\"exampleCheck1\" required>\n                    <label class=\"form-check-label\" for=\"exampleCheck1\">Remeber me</label>\n\n                </div>\n                <div class=\"mb-3 \">\n                    <span>Not a member? </span>\n                    <router-link to='/register'>\n                    Register\n                    </router-link>\n\n                </div>\n\n                <button type=\"submit\" class=\"btn btn-primary\">Submit</button>\n            </form>\n            \n        </div>\n    </div>\n    \n    </div>\n    <router-view></router-view>\n\n    </div>\n    \n    \n</template>\n<script>\nimport axios from 'axios'\nexport default {\n    name:'Login',\n\n    data(){\n        return{\n            username:'',\n            password:'',\n            errors:[]\n        }\n    },\n    methods:{\n        async submit(){\n            const formdata = {\n                username:this.username,\n                password:this.password\n            }\n            let _this = this\n            //console.log(formdata)\n            delete  axios.defaults.headers.common[\"Authorization\"];\n            this.errors = [];\n            await axios.post('api/auth/token/login/',formdata)\n            .then(res => {\n                const token = res.data['auth_token']\n                // this.$store.dispatch('user',res.data)\n                localStorage.setItem('token',token)\n                axios.defaults.headers.common['Authorization'] =  \"Token \"  +  localStorage.getItem('token')\n                axios.get('api/auth/users/me/')\n                .then(res => {\n                    this.$store.dispatch('user',res.data)\n                    //console.log(this.$store.state.user)\n                    this.$router.push('/')\n                })\n                .then(err => {\n                    console.log(err)\n                })\n                //console.log(this.$store.state.user.auth_token)\n            })\n            .catch(function (error) {\n                if (error.response) {\n                // Request made and server responded\n                \n                //console.log(error.response.data);\n                _this.errors = error.response\n                console.log(_this.errors)\n                \n                \n                \n                \n                } \n\n            });\n        }\n    }\n}\n</script>\n<style>\n.container{\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    \n}\n.card{\n    margin-top: 3rem;\n} \nh2{\n    font-weight: 900;\n}\n</style>"],"sourceRoot":""}]}